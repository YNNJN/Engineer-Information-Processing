## 3과목 - 데이터베이스 구축





1. 논리 데이터베이스 설계
2. 물리 데이터베이스 설계
3. SQL 응용
4. SQL 활용
5. 데이터 전환

---





## 1. 논리 데이터베이스 설계

### 1. 데이터베이스 설계

- 사용자 요구를 분석하여 구조에 맞게 변경한 후 특정 DBMS로 데이터베이스를 구현하여 일반 사용자들이 사용하게 하는 것
- 무결성, 일관성, 회복, 보안, 효율성, 데이터베이스 확장을 고려해야
  - 무결성이란 삽입, 삭제, 갱신의 연산 후에도 저장된 데이터가 정해진 제약조건을 항상 만족하는 것

- 설계 단계 단계는 다음과 같음
  1. 요구사항 분석 - 데이터베이스의 용도 파악, 결과물: 요구사항 명세서
  2. 개념적 설계 - DBMS에 독립적인 개념적 구조 설계, 결과물: 개념적 스키마(E-R 다이어그램) **(독립적 개념스키마 설계, 트랜잭션 모델링)**
  3. 논리적 설계 - DBMS에 적합한 논리적 구조 설계, 결과물: 논리적 스키마 **(종속적 논리스키마 설계, 트랜잭션 인터페이스 설계)**
  4. 물리적 설계 - DBMS로 구현 가능한 물리적 구조 설계, 결과물: 물리적 구조 스키마
  5. 구현 - SQL 문을 작성한 후 이를 DBMS에서 실행하여 데이터베이스 생성





### 2. 데이터 모델의 개념

- 현실 세계에 존재하는 데이터를 컴퓨터 세계의 데이터 베이스로 옮기는 변환 과정
- 데이터베이스 설계의 핵심 과정

- 2단계로 이루어짐
  - 개념적 데이터 모델링: 현실 세계의 중요 데이터를 추출하여 개념 세계로 옮기는 작업
    - 개체 - 관계 모델로 표현됨 (E-R 모델)
    - 개체와 개체 간의 관계를 이용해 현실세계를 개념적 구조로 표현 (개체, 속성, 관계)
    - 개체 타입, 개체 인스턴스, 개체 집합
  - 논리적 데이터 모델링: 개념 세계의 데이터를 데이터베이스에 저장하는 구조로 표현하는 작업
    - 관계 데이터 모델로 표현됨
      - 하나의 개체에 대한 데이터를 하나의 릴레이션에 저장함
      - 릴레이션이란 하나의 개체에 관한 데이터를 2차원의 테이블 구조로 저장한 것
      - 열(속성), 행(튜플)로 구성
    - 논리적 데이터 모델 품질 검증 시 속성 측면에서, 다치종속을  여부를 확인함
      - 다치 종속이란 복합 속성 (A, C)에 대응하는 B 값의 집합이 A에만 종속되고 C값에는 무관하면, B는 A에 다치종속
- 관계란 개체 집합들 사이의 대응 관계, mapping
  - 관계의 유형: 관계에 참여하는 개체 타입의 수 기준
    - 이항 관계 / 삼항 관계 / 순환 관계
  - 관계의 유형: 매핑 카디널리티 기준
    - 일대일 관계, 일대다 관계, 다대다 관계





### 3. DBMS

- DataBase Manegement System
- 파일 시스템의 문제를 해결하기 위해 제시된 소프트웨어
- 조직에 필요한 데이터를 데이터베이스에 통합하여 저장하고 관리함

- 발전 과정은 다음과 같음
  - 1세대: 네트워크 DBMS(그래프형태), 계층 DBMS(트리형태)
  - 2세대: 관계 DBMS - 데이터베이스를 테이블 형태로 구성 - 오라클, MS SQL 서버, MySQL
  - 3세대: 객체 지향 DBMS, 객체 관계 DBMS
    - 객체지향 DBMS: 객체를 이용해 데이터베이스를 구성 - 오투, 온투스, 젬스톤
    - 객체관계 DBMS: 객체 DBMS + 관계 DBMS
  - 4세대:
    - NoSQL DBMS: 비정형 데이터를 처리하는 데 적합하고 확장성이 뛰어남 
      - 몽고디비, 카산드라
    - NewSQL DBMS: 관계 DBMS의 장점 + NoSQL의 확장성 및 유연성
      - 구글 스패너, 볼트 DB, 누오 DB

- 데이터베이스 용어
  - 스키마: 데이터베이스에 저장되는 데이터 구조와 제약 조건을 정의한 것
  - 인스턴스: 스키마에 따라 데이터베이스에 실제로 저장된 값
  - 데이터 독립성
    - 하위 스키마를 변경하더라도 상위 스키마가 영향을 받지 않는 특성
    - 논리적 데이터 독립성 - 개념 스키마가 변경되어도 외부 스키마는 영향을 받지 않음
    - 물리적 데이터 독립성 - 내부 스키마가 변경되어도 개념 스키마는 영향을 받지 않음





### 4. 제약 조건 (Key / 무결성)

- 관계형 데이터베이스에서, 데이터의 정확성을 보장하기 위해 입력되는 데이터에 제한을 둠 (제약 조건)
- 개체 무결성 제약, 참조 무결성 제약이 해당됨
- 키란 튜플들을 서로 구분할 수 있는 기준이 되는 애트리뷰트
  - 종류는 후보키, 기본키, 대체키, 슈퍼키, 외래키가 있음
- 무결성이란 저장된 데이터 값과 그것이 표현하는 현실 세계의 실제 값이 일치하는 정확성을 의미
  - 개체 무결성: 기본 테이블의 기본 키를 구성하는 어떤 속성도 Null 값이나 중복값을 가질 수 없음
  - 도메인 무결성: 주어진 속성 값이 정의된 도메인에 속한 값이어야 함
  - 참조 무결성: 외래키 값은 Null이거나 참조 릴레이션의 기본키 값과 동일해야
    - 즉 릴레이션은 참조할 수 없는 외래키 값을 가질 수 없다는 규정
    - 외래키와 참조하려는 테이블의 기본키는 도메인과 속성의 개수가 같아야 함
  - 사용자 정의 무결성: 속성 값들이 사용자가 정의한 제약 조건을 만족해야 함
- 데이터베이스 구축 과정에서 무결성을 정의해야





### 5. 관계대수 및 관계해석

- 관계대수는 릴레이션을 처리하기 위해 연산자와 연산 규칙을 제공하는 언어
  - 피연산자가 릴레이션이고, 결과도 릴레이션
  - 관계 데이터베이스 적용위한 순수관계 연산자와 집합론의 일반 집합 연산자가 있음
    - 순수관계 연산자: Select, Project, Join, Division
      - Select - 수평연산, 시그마 
      - Project - 수직연산, 파이
      - Join - 공통 속성 중심으로 새로운 릴레이션 만듦, 리본
        - Join의 결과 릴레이션 차수는 조인된 두 릴레이션의 차수를 합한 것
        - Join의 결과는 Cartesian product 수행 후 select 수행한 것과 같음
        - 자연 조인이란 중복된 속성을 제거하여 같은 속성을 한 번만 표기하는 방법
      - Division - R>S인 튜플에서 S가 가진 속성을 제외한 속성만을 구하는 연산, 나누기
    - 일반집합 연산자: UNION, INTERSECTION, DIFFERRENCE, CARTESIAN PRODUCT
- 관계해석은 관계 데이터의 연산을 표현하는 방법
  - 원하는 정보 정의 시 계산 수식 사용, 비절차적 특성, 질의어로 표현
  - Predicate Calculus(술어 해석)에 기반
- 관계대수와 관계해석은 관계 데이터베이스를 처리하는 기능과 능력 면에서 동일, 관계대수 표현식은 관계 해석으로 표현 가능





### 6. 정규화

- 정규화(Normalization)
  - 이상 현상이 발생하지 않도록 릴레이션을 관련 속성들로만 구성하기 위해 릴레이션을 분해하는 과정
    - 이상 현상이란 불필요한 데이터 중복으로 인해
      - 릴레이션에 대한 데이터 삽입, 수정, 삭제 연산을 수행할 때 발생할 수 있는 부작용
  - 함수적 종속성(Functional Dependency)을 판단하여 정규화를 수행함
    - 함수적 종속성이란 속성들 간의 관련성
      - ex. 학번 -> 이름 (학번에 따라 이름이 결정됨) (이름이 학번에 함수종속적)
      - 이 때 학번 - 결정자, 이름 - 종속자
    - 함수 종속성을 이용하여, 릴레이션을 연관성이 있는 속성들로만 구성되도록 분해하여 이상 현상이 발생하지 않는 바람직한 릴레이션으로 만들어나가는 과정
    - 정규화를 통해 릴레이션은 무손실 분해 되어야

- 정규형(NF; Normal Form)

  - 릴레이션이 정규화된 정도로 각 정규형마다 제약 조건이 존재

  - 릴레이션의 특성을 고려하여 적합한 정규형을 선택함

  - 종류는 다음과 같음

    - 기본 정규형
      - 제1정규형 - 릴레이션의 모든 속성이 더는 분해되지 않는 원자값
        - 제 1정규형을 만족해야 관계 데이터베이스의 릴레이션이 될 자격이 있음
      - 제2정규형 - 릴레이션이 제1정규형에 속하고, 기본키가 아닌 모든 속성이 기본키에 완전 함수 종속
      - 제3정규형 - 릴레이션이 제2정규형에 속하고, 기본키가 아닌 모든 속성이 기본키에 이행적 함수 종속 x
        - 이행적 함수 종속이란 A->B이고  B->C일 때 A->C를 만족하는 관계
        - 이것을 제거한 것이 제 3 정규형
      - 보이스/코드 정규형 - 하나의 릴레이션에서 결정자가 모두 후보키인 정규형
        - 제 3정규형까지 만족해도 이상 현상 발생 가능
    - 고급 정규형
      - 제4정규형 - 릴레이션이 보이스 / 코드 정규형을 만족하면서, 함수 종속이 아닌 다치 종속인 정규형
        - 종속(MVD, MultiValued Dependency)을 제거하면 제 4 정규형에 속함
      - 제5정규형 - 릴레이션이 제 4 정규형을 만족하면서, 리레이션의 모든 종속이 후보키를 통해서만 성립되는 정규형
        - 후보키를 통하지 않는 조인 종속을 제거하면 제 5 정규형에 속함

  - 즉 제1정규형 > 제2정규형 > 제3정규형 > BCNF형 > 제4정규형 > 제5정규형

    - 모든 릴레이션이 제 5 정규형에 속해야만 바람직한 것은 아님

    - 일반적으로 제3 이나 보이스/코드 정규형에 속하도록 릴레이션을 분해

      -> 데이터 중복을 줄이고 이상 현상을 해결함





### 7. 반정규화

- 정규화된 데이터 모델을 통합, 중복, 분리하는 과정으로, 의도적으로 정규화 원칙을 위배함
- 일관성&무결성 / 성능&단순화, 우선순위에 따라 결정
- 테이블 통합, 테이블 분할, 중복 테이블 추가, 중복 속성 추가의 방법이 있음





### 8. 시스템 카탈로그

- DBMS에서 지원하는 모든 데이터 객체에 대한 정의나 명세에 관한 정보를 유지 관리하는 시스템 테이블
- 카탈로그들이 생성되면 Data Dictionary에 저장되기 때문에, 좁은 의미로 카탈로그 == 데이터사전
- 메타데이터: 시스템 카탈로그에 저장된 정보
- 특징은 다음과 같음
  - 일반 사용자도 SQL 이용해 내용 검색 가능, 갱신은 비허용
  - 데이터베이스 시스템에 따라 상이한 구조 가짐
  - 카탈로그는 DBMS가 스스로 생성하고 유지함
- 카탈로그 / 데이터 사전을 참조하기 위한 DBMS 내의 모듈 시스템으로 다음이 있음
  - DDL Complier
  - DML Complier
  - Data Directory
    - 데이터 사전에 수록된 데이터를 실제로 접근하는 데 피룡한 정보를 관리 유지하는 시스템
    - 데이터 디렉터리는 시스템만 접근 가능(사용자 x)
  - 질의 최적화기
  - 트랜잭션 처리기